<h1>Lettore:</h1>
<p id="p">

</p>
<script>


    if (!("NDEFReader" in window)){
        document.getElementById("p").append("Web NFC is not available. Use Chrome on Android.");
    }else{
        document.getElementById("p").append("Web NFC is  available.");
    }


    const nfcPermissionStatus = await navigator.permissions.query({ name: "nfc" });
    if (nfcPermissionStatus.state === "granted") {
        document.getElementById("p").append("granted")
    }else{
        document.getElementById("p").append("not granted")
    }
    const ndef = new NDEFReader();

    function read() {
        return new Promise((resolve, reject) => {
            const ctlr = new AbortController();
            ctlr.signal.onabort = reject;
            ndef.addEventListener("reading", event => {
                ctlr.abort();
                resolve(event);
            }, { once: true });
            ndef.scan({ signal: ctlr.signal }).catch(err => reject(err));
        });
    }

    read().then(({ serialNumber }) => {
        document.getElementById("p").append(serialNumber);
    });
</script>
