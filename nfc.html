<h1>Lettore:</h1>
<button id="scanButton">Scan</button>
<script>

    if (/Chrome\/(\d+\.\d+.\d+.\d+)/.test(navigator.userAgent)){
        // Let's log a warning if the sample is not supposed to execute on this
        // version of Chrome.
        if (89 > parseInt(RegExp.$1)) {
            ChromeSamples.setStatus('Warning! Keep in mind this sample has been tested with Chrome ' + 89 + '.');
        }
    }

    log = ChromeSamples.log;

    if (!("NDEFReader" in window))
        ChromeSamples.setStatus("Web NFC is not available. Use Chrome on Android.");

    let scanButton=document.getElementById("scanButton");
    scanButton.addEventListener("click", async () => {
        log("User clicked scan button");

        try {
            const ndef = new NDEFReader();
            await ndef.scan();
            log("> Scan started");

            ndef.addEventListener("readingerror", () => {
                log("Argh! Cannot read data from the NFC tag. Try another one?");
            });

            ndef.addEventListener("reading", ({ message, serialNumber }) => {
                log(`> Serial Number: ${serialNumber}`);
                log(`> Records: (${message.records.length})`);
            });
        } catch (error) {
            log("Argh! " + error);
        }
    });

</script>
